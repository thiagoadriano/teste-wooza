{"version":3,"sources":["./maps/src/ts/bootstrap/bootstrap.app.ts","./maps/src/ts/bootstrap/router.bootstrap.ts","./maps/src/ts/components/product.component.ts","./maps/src/ts/controller/platforms.controller.ts","./maps/src/ts/helps/mensagens.help.ts","./maps/src/ts/helps/util.helps.ts","./maps/src/ts/model/platforms.model.ts","./maps/src/ts/service/platforms.service.ts"],"names":["APPWZ","appRun","$inject","angular","module","constant","run","Router","$stateProvider","$urlRouterProvider","$locationProvider","RoutesStates","push","name","url","templateUrl","controller","controllerAs","forEach","state","otherwise","html5Mode","config","_controller","$state","vm","this","selecionaPlataforma","item","model","go","idPlan","sku","objComp","bindings","list","component","PlatformsController","PS","PM","getIcon","idclass","computador","tablet","wifi","toLowerCase","replace","listPlatforms","listPlan","Model","saveForm","isValid","getPlatforms","then","result","map","icone","nome","MsgInfos","_geraEl","tipo","ico","msg","_boxMsg","_disparaAlert","obj","_removerAfterTime","_addAlert","_checkMsg","match","_isStringArray","_isStringObjeto","isArray","join","isObject","JSON","stringify","parse","split","_hasAlert","box","find","is","$tpl","$","attr","Date","now","hide","prepend","append","last","fadeIn","id","temporizer","setTimeout","fadeOut","remove","clearTimeout","removeAlertBox","length","empty","success","msgInput","info","warning","danger","factory","searchItemId","lista","idItem","sort","a","b","listaTamanho","meioLista","Math","round","i","Plataforma","Plano","Nome","Email","Nascimento","CPF","Telefone","newModel","PlatformsService","$http","$q","API","Util","Salvar","console","log","defer","get","data","plataformas","descricao","resolve","err","error","reject","promise","getPlan","plan","planos","filter","ativo","service"],"mappings":"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","file":"../app.min.js","sourcesContent":["namespace APPWZ {\n    appRun.$inject = [];\n    \n    function appRun() { }\n\n    angular\n        .module('AppWooza', [\"ui.router\"])\n        .constant(\"API\", \"http://private-59658d-celulardireto2017.apiary-mock.com/\")\n        .run(appRun);\n}  ","namespace APPWZ {\n\n    Router.$inject = [\"$stateProvider\", \"$urlRouterProvider\", \"$locationProvider\"];\n    function Router($stateProvider, $urlRouterProvider, $locationProvider) {\n        let RoutesStates = [];\n\n        RoutesStates.push({\n            name: 'platforms',\n            url: '/platforms',\n            templateUrl: 'views/platforms.html',\n            controller: 'PlatformsController',\n            controllerAs: \"vm\"\n        });\n\n        RoutesStates.push({\n            name: 'plans',\n            url: '/planos/:idPlan',\n            templateUrl: 'views/plans.html',\n            controller: 'PlansController',\n            controllerAs: \"vm\"\n        });\n\n        RoutesStates.push({\n            name: 'register',\n            url: '/register',\n            templateUrl: 'views/register.html',\n            controller: 'RegisterController',\n            controllerAs: \"vm\"\n        });\n\n        RoutesStates.forEach( (state) => {\n            $stateProvider.state(state);\n        })\n\n        $urlRouterProvider.otherwise(\"/platforms\");\n        $locationProvider.html5Mode(true);\n    }\n\n    angular\n        .module(\"AppWooza\")\n        .config(Router);\n}","namespace APPWZ{\r\n\r\n    var objComp = {\r\n        bindings: {\r\n            list: \"=\",\r\n            model: \"=\"\r\n        },\r\n        templateUrl: \"../components/product.html\",\r\n        controller: _controller\r\n    };\r\n\r\n    _controller.$inject = [\"$state\"];\r\n    function _controller($state){\r\n        var vm = this;\r\n        /**\r\n         * Ação usada na seleção da plataforma para popular a model\r\n         * @param item {Objeto} - Plataforma selecionada\r\n         */\r\n        vm.selecionaPlataforma = function(item){\r\n            vm.model = item;\r\n            $state.go(\"plans\", {idPlan: vm.model.sku});\r\n        }\r\n       \r\n\r\n    }   \r\n\r\n    angular.module(\"AppWooza\") \r\n            .component(\"products\", objComp);\r\n}","/**\n * Controle da aplicação para a rota platforms\n */\nnamespace APPWZ {\n    PlatformsController.$inject = [\"PlatformsService\", \"PlatformsModel\"];\n    function PlatformsController(PS:IServicePlatform, PM:IModel) {\n        let vm = this;\n        vm.listPlatforms = []; \n        vm.listPlan = [];\n        vm.Model = PM.model;\n        vm.saveForm = saveForm;\n \n        init();\n\n\n        /**\n         * Salva os dados do formulário e on envia para o serviço\n         * @param isValid {boolean} - indica se os valores do formulário foram preenchidos\n         */\n        function saveForm(isValid){\n\n        }\n\n        /**\n         * Função retorna o icone para o tipo especificado\n         * @param idclass classe de complementação para o icone\n         */\n        function getIcon(idclass:string):string{\n            let icon = {\n                computador: \"laptop\",\n                tablet: \"tablet\",\n                wifi: \"connection\"\n            }\n            return icon[idclass.toLowerCase().replace(/\\-/g, '')];            \n        }\n\n        /**\n         * Busca os planos a partir do plano informado na model\n         */\n        function getPlan(){\n            PS.getPlan(vm.Model.Plataforma.sku)\n                .then((result)=>{\n                    vm.listPlan = result;\n                });\n        }\n\n        /**\n         * Executa inicialmente o controller\n         */\n        function init(){\n            PS.getPlatforms().then((result)=>{\n                result.map((item)=>{\n                    item.icone = getIcon(item.nome);\n                });\n                vm.listPlatforms = result;\n            });\n        };\n       \n    }\n\n    angular\n        .module(\"AppWooza\")\n        .controller(\"PlatformsController\", PlatformsController);\n}","/**\n * Recusro para mensagens de notificação sobre os fluxos para o usuário\n */\nnamespace APPWZ {\n\n    MsgInfos.$inject = [];\n    function MsgInfos() {\n        var box = $(\"main\");\n\n        return {\n            success: _success,\n            info: _info,\n            warning: _warning,\n            danger: _danger\n        }\n\n        function _geraEl(tipo, ico, msg) {\n            return '<li><p class=\"alert alert-' + tipo + ' alert-dismissible\">' +\n                '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n                '<span class=\"glyphicon glyphicon-' + ico + '\"></span> <strong>' + msg + '</strong>' +\n                '</p></li>';\n        };\n\n        function _boxMsg() {\n            return \"<div class='alertSystem'><ul class='list-alert'></ul></div>\";\n        }\n\n        function _success(msgInput) {\n            _disparaAlert(_geraEl(\"success\", \"ok-sign\", _checkMsg(msgInput)));\n        };\n\n        function _info(msgInput) {\n            _disparaAlert(_geraEl(\"info\", \"info-sign\", _checkMsg(msgInput)));\n        };\n\n        function _warning(msgInput) {\n            _disparaAlert(_geraEl(\"warning\", \"alert\", _checkMsg(msgInput)));\n        };\n\n        function _danger(msgInput) {\n            _disparaAlert(_geraEl(\"danger\", \"remove-sign\", _checkMsg(msgInput)));\n        };\n\n        function _disparaAlert(obj) {\n            _removerAfterTime(_addAlert(obj));\n        };\n\n        function _checkMsg(msg) {\n            if (typeof msg === \"string\") {\n                if (msg.match(/^\\[.*\\]$/) !== null) {\n                    return _isStringArray(msg);\n                } else if (msg.match(/^\\{.*\\}$/) !== null) {\n                    return _isStringObjeto(msg);\n                }\n            } else {\n                if (angular.isArray(msg)) {\n                    return msg.join(\"<br>\");\n                } else if (angular.isObject(msg)) {\n                    return _isStringObjeto(JSON.stringify(msg));\n                }\n            }\n            return msg;\n        };\n\n        function _isStringArray(msg) {\n            var arr = JSON.parse(msg);\n            return arr.join(\"<br>\");\n        };\n\n        function _isStringObjeto(msg) {\n            var arrayString = msg.replace(/^\\{(.*)\\}$/, \"$1\").split(',');\n            return arrayString.join(\"<br>\");\n        };\n\n        function _hasAlert() {\n            return box.find(\".alertSystem\").is(\":visible\");\n        };\n\n        function _addAlert(obj) {\n            var $tpl = $(obj).attr(\"id\", Date.now()).hide();\n            if (!_hasAlert()) {\n                box.prepend(_boxMsg());\n            }\n\n            return box\n                .find(\".alertSystem .list-alert\")\n                .append($tpl)\n                .find(\"li\")\n                .last()\n                .fadeIn();\n        };\n\n        function _removerAfterTime(obj) {\n            var id = obj.attr(\"id\");\n            var temporizer = setTimeout(function () {\n                var alert = box.find(\".alertSystem\").find(\"#\" + id);\n                alert.fadeOut(\"slow\", function () {\n                    $(this).remove();\n                    clearTimeout(temporizer);\n                    removeAlertBox();\n                });\n            }, 6000)\n        };\n\n        function removeAlertBox() {\n            if (!box.find(\".alertSystem\").find(\"li\").length) {\n                box.find(\".alertSystem\").empty().remove();\n            }\n        }\n\n\n    };\n\n    angular\n        .module(\"AppWooza\")\n        .factory(\"MsgInfos\", MsgInfos);\n}","/**\n * Funções que serão rearoveitadas durante a vida do app\n */\nnamespace APPWZ {\n    function UtilHelpers() {\n\n        return {\n            searchItemId: searchItemId\n        };\n\n        function searchItemId(lista: Array<any>, idItem: number) {\n            lista.sort((a, b) => {\n                return a.id > b.id;\n            });\n\n            let listaTamanho = lista.length,\n                meioLista = Math.round(listaTamanho / 2),\n                posiStart = idItem <= meioLista ? 0 : meioLista;\n\n            for (let i = posiStart; i < idItem; i++) {\n                if (lista[i].id === idItem) {\n                    return lista[i];\n                }\n            }\n            return null;\n        }\n\n           \n    }\n\n    angular\n        .module(\"AppWooza\")\n        .factory(\"UtilHelpers\", UtilHelpers);\n}","/**\n * Gera a model para o fluxo da plataforma\n */\nnamespace APPWZ {\n    function PlatformsModel() {\n        let Model = {\n            Plataforma: \"\",\n            Plano: \"\",\n            Nome: \"\",\n            Email: \"\",\n            Nascimento: \"\",\n            CPF: \"\",\n            Telefone: \"\"\n        };\n\n        /**\n         * Limpa a model e cria nova referencia\n         */\n        function _newModel() {\n            Model = {\n                Plataforma: \"\",\n                Plano: \"\",\n                Nome: \"\",\n                Email: \"\",\n                Nascimento: \"\",\n                CPF: \"\",\n                Telefone: \"\"\n            };\n        }\n\n        return {\n            model: Model,\n            newModel: _newModel\n        };\n    }\n\n    angular\n        .module(\"AppWooza\")\n        .factory(\"PlatformsModel\", PlatformsModel);\n}","/**\n * Serviços que linkando o backend com o front end da aplicação\n */\nnamespace APPWZ {\n    PlatformsService.$inject = [\"$http\", \"$q\", \"API\", \"MsgInfos\", \"UtilHelpers\"];\n    function PlatformsService($http, $q, API, MsgInfos:IMgs, Util) {\n        return {\n            Salvar: _save,\n            getPlatforms: _getPlatforms,\n            getPlan: _getPlan\n        }\n \n        /**\n         * Salva os dados do que foi selecionado e preenchido no fluxo da plataforma\n         * @param obj {Object} Model da plataforma\n         */\n        function _save(obj) {\n            console.log(obj);\n            MsgInfos.success(\"Os dados foram enviados com sucesso!\");\n        }\n\n        /**\n         * Busca todas as platafomas e as devolve com promise\n         */\n        function _getPlatforms(){\n            let defer = $q.defer();\n            $http.get(`${API}plataformas`)\n                .then( (result) => {\n                    result.data.plataformas.map((item:IPlatform)=>{\n                        item.descricao = item.descricao.replace(\"|\", \"\\n\");\n                    });\n                    defer.resolve(<Array<IPlatform>>result.data.plataformas); \n                })\n                .catch( (err) => {\n                    console.error(err);\n                    MsgInfos.danger(\"Não foi possível mostrar as plataformas\");\n                    defer.reject(err);\n                });\n\n            return defer.promise;\n        }\n\n        /**\n         * Busca os planos informados pela plataforma selecionada\n         * @param plan {string} id da plataforma selecionada\n         */\n        function _getPlan(plan:string){\n            let defer = $q.defer();\n            $http.get(`${API}planos/${plan}`)\n                .then( (result) => {\n                    result.data.planos.filter( (item) => item.ativo );\n                    defer.resolve(<Array<IPlanoWifi|IPlanoAparelho>>result.data.planos); \n                })\n                .catch( (err) => {\n                    console.error(err);\n                    MsgInfos.danger(`Não foi possível buscar os planos para a plataforma selecionada`);\n                    defer.reject(err);\n                });\n\n            return defer.promise;\n        }\n \n    }\n\n    angular\n        .module(\"AppWooza\")\n        .service(\"PlatformsService\", PlatformsService);\n}"]}