var APPWZ;!function(e){function o(){}o.$inject=[],angular.module("AppWooza",["ui.router"]).constant("API","http://private-59658d-celulardireto2017.apiary-mock.com/").run(o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n){var t=[];t.push({name:"platforms",url:"/platforms",templateUrl:"views/platforms.html",controller:"PlatformsController",controllerAs:"vm"}),t.push({name:"plans",url:"/planos/:idPlan",templateUrl:"views/plans.html",controller:"PlansController",controllerAs:"vm"}),t.push({name:"register",url:"/register",templateUrl:"views/register.html",controller:"RegisterController",controllerAs:"vm"}),t.forEach(function(o){e.state(o)}),o.otherwise("/platforms")}o.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("AppWooza").config(o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o){var n=this,t=o.model();n.selectItem=function(o){"Platform"===n.use?(t.Plataforma=o,e.go("plans",{idPlan:o.sku})):(t.Plano=o,e.go("register"))},n.$postLink=function(){"Platform"===n.use?n.itemEscolhido=t.Plataforma.sku:n.itemEscolhido=t.Plano.sku}}var n={bindings:{list:"=",use:"@"},templateUrl:"components/products.html",controller:o};o.$inject=["$state","PlatformsModel"],angular.module("AppWooza").component("products",n)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n){var t=this;t.listPlans=[],t.Model=o.model(),e.getPlans(t.Model.Plataforma.sku).then(function(e){t.listPlans=e}),t.Model.Plataforma||n.go("platforms")}o.$inject=["PlansService","PlatformsModel","$state"],angular.module("AppWooza").controller("PlansController",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n){var t=this;t.listPlatforms=[],t.listPlan=[],t.Model=o.model(),t.saveForm=function(e){},e.getPlatforms().then(function(e){e.map(function(e){e.icone=n.getIcon(e.nome)}),t.listPlatforms=e})}o.$inject=["PlatformsService","PlatformsModel","UtilHelpers"],angular.module("AppWooza").controller("PlatformsController",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n,t,r){function a(){var e=/\d{2}\/\d{2}\/\d{4}/,o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n=/\(\d{2}\)\s\d{4,5}-\d{4}/,t=0;return/\d{3}\.\d{3}\.\d{3}-\d{2}/.test(l.Model.CPF)||(r.danger("O CPF não está no padrão correto. Ex: 123.456.789-10"),t++),CPF.validate(l.Model.CPF)||(r.danger("Este CPF é inválido."),t++),e.test(l.Model.Nascimento)||(r.danger("A data de Nascimento não está no padrão correto. Ex: 12/10/1980"),t++),moment(l.Model.Nascimento,"DD/MM/YYYY").isValid()||(r.danger("Esta data de nascimento é inválida."),t++),o.test(l.Model.Email)||(r.danger("O Email não está no padrão correto. Ex: fulano@beltrano.com"),t++),n.test(l.Model.Telefone)||(r.danger("O Telefone não está no padrão correto. Ex: (21) 23456-9874"),t++),!(t>0)}var l=this;l.Model=o.model(),l.goBack=function(){n.go("plans",{idPlan:l.Model.Plataforma.sku})},l.maskCPF=function(){l.Model.CPF=t.maskCPF(l.Model.CPF)},l.maskData=function(){l.Model.Nascimento=t.maskData(l.Model.Nascimento)},l.maskTel=function(){l.Model.Telefone=t.maskTel(l.Model.Telefone)},l.sendForm=function(t){t?a()&&e.Salvar(l.Model).then(function(){o.newModel(),n.go("platforms")}):r.danger("Preencha os campos com a borda vermelha")},l.Model.Plataforma||n.go("platforms"),l.Model.Plano||n.go("plans",{idPlan:l.Model.Plataforma.sku})}o.$inject=["RegisterService","PlatformsModel","$state","UtilHelpers","MsgInfos"],angular.module("AppWooza").controller("RegisterController",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(){function e(e,o,n){return'<li><p class="alert alert-'+e+' alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="glyphicon glyphicon-'+o+'"></span> <strong>'+n+"</strong></p></li>"}function o(){return"<div class='alertSystem'><ul class='list-alert'></ul></div>"}function n(e){s(i(e))}function t(e){if("string"==typeof e){if(null!==e.match(/^\[.*\]$/))return r(e);if(null!==e.match(/^\{.*\}$/))return a(e)}else{if(angular.isArray(e))return e.join("<br>");if(angular.isObject(e))return a(JSON.stringify(e))}return e}function r(e){return JSON.parse(e).join("<br>")}function a(e){return e.replace(/^\{(.*)\}$/,"$1").split(",").join("<br>")}function l(){return u.find(".alertSystem").is(":visible")}function i(e){var n=$(e).attr("id",Date.now()).hide();return l()||u.prepend(o()),u.find(".alertSystem .list-alert").append(n).find("li").last().fadeIn()}function s(e){var o=e.attr("id"),n=setTimeout(function(){u.find(".alertSystem").find("#"+o).fadeOut("slow",function(){$(this).remove(),clearTimeout(n),c()})},6e3)}function c(){u.find(".alertSystem").find("li").length||u.find(".alertSystem").empty().remove()}var u=$("main");return{success:function(o){n(e("success","ok-sign",t(o)))},info:function(o){n(e("info","info-sign",t(o)))},warning:function(o){n(e("warning","alert",t(o)))},danger:function(o){n(e("danger","remove-sign",t(o)))}}}o.$inject=[],angular.module("AppWooza").factory("MsgInfos",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){angular.module("AppWooza").factory("UtilHelpers",function(){return{searchItemId:function(e,o){e.sort(function(e,o){return e.id>o.id});for(var n=e.length,t=Math.round(n/2),r=o<=t?0:t;r<o;r++)if(e[r].id===o)return e[r];return null},getIcon:function(e){return{computador:"laptop",tablet:"tablet",wifi:"connection"}[e.toLowerCase().replace(/\-/g,"")]},maskCPF:function(e){return e=e.replace(/\D/g,""),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d{1,2})$/,"$1-$2")},maskTel:function(e){return e=e.replace(/\D/g,""),e=e.replace(/^(\d{2})(\d)/g,"($1) $2"),e=e.replace(/(\d)(\d{4})$/,"$1-$2")},maskData:function(e){return e=e.replace(/\D/g,""),e=e.replace(/(\d{2})(\d)/,"$1/$2"),e=e.replace(/(\d{2})(\d)/,"$1/$2"),e=e.replace(/(\d{2})(\d{2})$/,"$1$2")}}})}(APPWZ||(APPWZ={}));var APPWZ;!function(e){angular.module("AppWooza").factory("PlatformsModel",function(){function e(){o={Plataforma:"",Plano:"",Nome:"",Email:"",Nascimento:"",CPF:"",Telefone:""}}var o={};return e(),{model:function(){return o},newModel:e}})}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n,t){return{getPlans:function(r){var a=o.defer();return e.get(n+"planos/"+r).then(function(e){e.data.planos.filter(function(e){return e.ativo}),a.resolve(e.data.planos)}).catch(function(e){console.error(e),t.danger("Não foi possível buscar os planos para a plataforma selecionada"),a.reject(e)}),a.promise}}}o.$inject=["$http","$q","API","MsgInfos"],angular.module("AppWooza").service("PlansService",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n,t,r){return{getPlatforms:function(){var r=o.defer();return e.get(n+"plataformas").then(function(e){e.data.plataformas.map(function(e){e.descricao=e.descricao.replace("|","\n")}),r.resolve(e.data.plataformas)}).catch(function(e){console.error(e),t.danger("Não foi possível mostrar as plataformas"),r.reject(e)}),r.promise}}}o.$inject=["$http","$q","API","MsgInfos","UtilHelpers"],angular.module("AppWooza").service("PlatformsService",o)}(APPWZ||(APPWZ={}));var APPWZ;!function(e){function o(e,o,n,t){return{Salvar:function(e){var n=o.defer();return console.log(e),setTimeout(function(){t.success("Os dados foram enviados com sucesso!"),n.resolve()},1e3),n.promise}}}o.$inject=["$http","$q","API","MsgInfos"],angular.module("AppWooza").service("RegisterService",o)}(APPWZ||(APPWZ={}));
//# sourceMappingURL=maps/app.min.js.map
